import{i as B,h as U,d as I,r as N,j as M,b as q,c as p,k as F,e as t,u as w,g as n,l as P,v as r,F as R,m as J,w as S,f as W,t as x,o as c}from"./index-HpfNv2Vn.js";import{u as A}from"./fitness-DRXE5iRB.js";import{M as H}from"./MeasurementHistoryTable-C-RBYzpe.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./formatters-DeZ-I65L.js";const L=[{value:1.2,label:"Сидячий образ жизни (мало или совсем нет упражнений)"},{value:1.375,label:"Легкая активность (легкие упражнения 1-3 дня в неделю)"},{value:1.55,label:"Умеренная активность (умеренные упражнения 3-5 дней в неделю)"},{value:1.725,label:"Высокая активность (интенсивные упражнения 6-7 дней в неделю)"},{value:1.9,label:"Очень высокая активность (спортсмен, физическая работа)"}],G=B("user",()=>{const v=U({gender:"male",age:30,activityLevel:L[2]}),u=()=>{const o=localStorage.getItem("userProfile");o&&(v.value=JSON.parse(o))},i=()=>{localStorage.setItem("userProfile",JSON.stringify(v.value))},d=o=>{v.value={...v.value,...o},i()};return u(),{profile:v,updateProfile:d}}),K={class:"body-composition"},Q={key:0,class:"card profile-card"},X={class:"form-group"},Y={class:"form-group"},Z={class:"form-group"},$=["value"],h={class:"card"},_={class:"form-group"},ee={class:"measurements-section"},te={class:"form-group"},oe={class:"form-group"},se={class:"form-group"},ae={class:"form-group"},le={class:"form-group"},ne={class:"form-group"},re={class:"form-group"},ie={class:"form-group"},de={key:0,class:"tdee-info"},ue={class:"tdee-value"},ve=I({__name:"BodyComposition",setup(v){const u=A(),i=G(),d=N({gender:i.profile.gender,age:i.profile.age,activityLevel:i.profile.activityLevel}),o=U({bodyFatPercentage:0,bodyFatMass:0,musclePercentage:0,muscleMass:0,bonePercentage:0,boneMass:0,waterPercentage:0,waterMass:0,visceralFat:0,bmi:0,totalScore:0,date:new Date().toISOString().split("T")[0],weight:void 0,notes:""}),b=M(()=>{var l,m;if(!o.value.weight||!o.value.bodyFatMass||!((l=i.profile)!=null&&l.age))return null;const e=21.6*(o.value.weight-o.value.bodyFatMass)+370,s=((m=i.profile.activityLevel)==null?void 0:m.value)||1.2;return Math.round(e*s)}),V=M(()=>u.measurements),D=()=>{i.updateProfile(d)},k=()=>{if(o.value.weight){const a=o.value.waterMass?(o.value.waterMass/o.value.weight*100).toFixed(1):void 0,e=o.value.bodyFatMass?(o.value.bodyFatMass/o.value.weight*100).toFixed(1):void 0,s=o.value.muscleMass?(o.value.muscleMass/o.value.weight*100).toFixed(1):void 0,l={date:new Date().toISOString(),bodyFatMass:o.value.bodyFatMass,bodyFatPercentage:e?parseFloat(e):void 0,muscleMass:o.value.muscleMass,musclePercentage:s?parseFloat(s):void 0,waterMass:o.value.waterMass,waterPercentage:a?parseFloat(a):void 0,bmi:o.value.bmi,totalScore:o.value.totalScore,visceralFat:o.value.visceralFat,tdee:b.value||void 0};u.addMeasurement(l),C()}},C=()=>{const a={bodyFatPercentage:0,bodyFatMass:0,musclePercentage:0,muscleMass:0,bonePercentage:0,boneMass:0,waterPercentage:0,waterMass:0,visceralFat:0,bmi:0,totalScore:0,date:new Date().toISOString().split("T")[0],weight:void 0,notes:""};o.value=a},f=a=>{const e={bodyFatPercentage:a.bodyFatPercentage||0,bodyFatMass:a.bodyFatMass||0,musclePercentage:a.musclePercentage||0,muscleMass:a.muscleMass||0,bonePercentage:a.bonePercentage||0,boneMass:a.boneMass||0,waterPercentage:a.waterPercentage||0,waterMass:a.waterMass||0,visceralFat:a.visceralFat||0,bmi:a.bmi||0,totalScore:a.totalScore||0,date:a.date.split("T")[0],weight:a.weight,notes:a.notes||""};o.value=e},E=()=>{const a=JSON.stringify(V.value,null,2),e=new Blob([a],{type:"application/json"}),s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download="body-composition-data.json",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)},O=()=>{const a=document.createElement("input");a.type="file",a.accept=".json",a.onchange=T,a.click()},T=async a=>{var m;const e=a.target;if(!((m=e.files)!=null&&m.length))return;const s=e.files[0],l=new FileReader;l.onload=j=>{var y;const g=(y=j.target)==null?void 0:y.result;typeof g=="string"&&u.importData(g)?alert("Данные успешно импортированы"):alert("Ошибка при импорте данных")},l.readAsText(s)};return q(()=>{u.editingMeasurement&&f(u.editingMeasurement)}),(a,e)=>(c(),p("div",K,[w(i).profile.age?F("",!0):(c(),p("div",Q,[e[17]||(e[17]=t("h3",null,"Заполните профиль",-1)),e[18]||(e[18]=t("p",null,"Для точных расчетов необходимо указать ваши данные",-1)),t("form",{onSubmit:S(D,["prevent"]),class:"profile-form"},[t("div",X,[e[13]||(e[13]=t("label",{for:"gender"},"Пол",-1)),n(t("select",{id:"gender","onUpdate:modelValue":e[0]||(e[0]=s=>d.gender=s),class:"form-control",required:""},e[12]||(e[12]=[t("option",{value:"male"},"Мужской",-1),t("option",{value:"female"},"Женский",-1)]),512),[[P,d.gender]])]),t("div",Y,[e[14]||(e[14]=t("label",{for:"age"},"Возраст",-1)),n(t("input",{type:"number",id:"age","onUpdate:modelValue":e[1]||(e[1]=s=>d.age=s),class:"form-control",required:"",min:"14",max:"100"},null,512),[[r,d.age]])]),t("div",Z,[e[15]||(e[15]=t("label",{for:"activityLevel"},"Уровень активности",-1)),n(t("select",{id:"activityLevel","onUpdate:modelValue":e[2]||(e[2]=s=>d.activityLevel=s),class:"form-control",required:""},[(c(!0),p(R,null,J(w(L),s=>(c(),p("option",{key:s.value,value:s},x(s.label),9,$))),128))],512),[[P,d.activityLevel]])]),e[16]||(e[16]=t("button",{type:"submit",class:"btn btn-primary"},"Сохранить профиль",-1))],32)])),t("div",h,[e[32]||(e[32]=t("h2",null,"Состав тела",-1)),t("form",{onSubmit:S(k,["prevent"]),class:"measurement-form"},[t("div",_,[e[19]||(e[19]=t("label",{for:"date"},"Дата",-1)),n(t("input",{type:"date",id:"date","onUpdate:modelValue":e[3]||(e[3]=s=>o.value.date=s),class:"form-control",required:""},null,512),[[r,o.value.date]])]),t("div",ee,[e[27]||(e[27]=t("h3",null,"Основные показатели",-1)),t("div",te,[e[20]||(e[20]=t("label",{for:"totalWeight"},"Общий вес (кг)",-1)),n(t("input",{type:"number",id:"totalWeight","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.weight=s),class:"form-control",step:"0.1",required:"",min:"30",max:"250"},null,512),[[r,o.value.weight]])]),t("div",oe,[e[21]||(e[21]=t("label",{for:"waterMass"},"Общее количество воды (л)",-1)),n(t("input",{type:"number",id:"waterMass","onUpdate:modelValue":e[5]||(e[5]=s=>o.value.waterMass=s),class:"form-control",step:"0.1",min:"20",max:"100"},null,512),[[r,o.value.waterMass]])]),t("div",se,[e[22]||(e[22]=t("label",{for:"bodyFatMass"},"Содержание жира (кг)",-1)),n(t("input",{type:"number",id:"bodyFatMass","onUpdate:modelValue":e[6]||(e[6]=s=>o.value.bodyFatMass=s),class:"form-control",step:"0.1",min:"2",max:"100"},null,512),[[r,o.value.bodyFatMass]])]),t("div",ae,[e[23]||(e[23]=t("label",{for:"muscleMass"},"Масса скелетной мускулатуры (кг)",-1)),n(t("input",{type:"number",id:"muscleMass","onUpdate:modelValue":e[7]||(e[7]=s=>o.value.muscleMass=s),class:"form-control",step:"0.1",min:"20",max:"100"},null,512),[[r,o.value.muscleMass]])]),t("div",le,[e[24]||(e[24]=t("label",{for:"visceralFat"},"Уровень висцерального жира",-1)),n(t("input",{type:"number",id:"visceralFat","onUpdate:modelValue":e[8]||(e[8]=s=>o.value.visceralFat=s),class:"form-control",step:"1",min:"1",max:"50"},null,512),[[r,o.value.visceralFat]])]),t("div",ne,[e[25]||(e[25]=t("label",{for:"bmi"},"ИМТ",-1)),n(t("input",{type:"number",id:"bmi","onUpdate:modelValue":e[9]||(e[9]=s=>o.value.bmi=s),class:"form-control",step:"0.1",min:"10",max:"50"},null,512),[[r,o.value.bmi]])]),t("div",re,[e[26]||(e[26]=t("label",{for:"totalScore"},"Общая оценка (0-100)",-1)),n(t("input",{type:"number",id:"totalScore","onUpdate:modelValue":e[10]||(e[10]=s=>o.value.totalScore=s),class:"form-control",step:"1",min:"0",max:"100"},null,512),[[r,o.value.totalScore]])])]),t("div",ie,[e[28]||(e[28]=t("label",{for:"notes"},"Примечания",-1)),n(t("textarea",{id:"notes","onUpdate:modelValue":e[11]||(e[11]=s=>o.value.notes=s),class:"form-control",placeholder:"Например: после тренировки, натощак, etc."},null,512),[[r,o.value.notes]])]),b.value?(c(),p("div",de,[e[29]||(e[29]=t("h3",null,"Расчетный TDEE",-1)),t("p",ue,x(b.value)+" ккал/день",1),e[30]||(e[30]=t("p",{class:"tdee-explanation"},"Основано на формуле с учетом вашего состава тела",-1))])):F("",!0),t("div",{class:"button-group"},[e[31]||(e[31]=t("button",{type:"submit",class:"btn btn-primary"},"Сохранить измерения",-1)),t("button",{type:"button",class:"btn btn-secondary",onClick:E}," Экспортировать данные "),t("button",{type:"button",class:"btn btn-secondary",onClick:O}," Импортировать данные ")])],32),W(H,{type:"composition",onEdit:f})])]))}}),ge=z(ve,[["__scopeId","data-v-b44274c5"]]);export{ge as default};

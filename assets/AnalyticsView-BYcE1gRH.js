import{d as S,r as A,l as d,c as u,f as a,h as I,n as B,a as V,q as _,u as F,m as b,t as r,s as f,o as l}from"./index-B1EE0T6L.js";import{u as E}from"./fitness-LfHAD162.js";import{C as L,a as R,L as T,P as M,b as q,p as z,c as O,d as U,e as C}from"./index-D-snd9-r.js";import{f as x}from"./formatters-DeZ-I65L.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"analytics"},G={class:"container"},H={class:"card"},J={class:"time-range"},K={class:"charts"},Q={class:"chart-container"},X={key:1,class:"no-data"},Y={class:"chart-container"},Z={key:1,class:"no-data"},$={class:"chart-container"},ee={key:1,class:"no-data"},te={class:"stats-grid"},ae={key:0,class:"stat-card"},se={class:"current"},ne={key:1,class:"stat-card"},oe={class:"current"},re={key:2,class:"stat-card"},le={class:"current"},ie={key:3,class:"stat-card"},ue={class:"current"},ce=S({__name:"AnalyticsView",setup(de){L.register(R,T,M,q,z,O,U);const P=E(),h=A("30"),m=d(()=>{const t=c();if(!t.length||!t[0].weight)return null;const e=t[0].weight.toFixed(1),s=t[t.length-1].weight,n=s?(t[0].weight-s).toFixed(1):"0";return{current:e,change:n}}),g=d(()=>{const t=c();if(!t.length||!t[0].bodyFatPercentage)return null;const e=t[0].bodyFatPercentage.toFixed(1),s=t[t.length-1].bodyFatPercentage,n=s?(t[0].bodyFatPercentage-s).toFixed(1):"0";return{current:e,change:n}}),v=d(()=>{const t=c();if(!t.length||!t[0].musclePercentage)return null;const e=t[0].musclePercentage.toFixed(1),s=t[t.length-1].musclePercentage,n=s?(t[0].musclePercentage-s).toFixed(1):"0";return{current:e,change:n}}),p=d(()=>{const t=c();if(!t.length||!t[0].tdee)return null;const e=t[0].tdee.toString(),s=t[t.length-1].tdee,n=s?(t[0].tdee-s).toString():"0";return{current:e,change:n}}),c=()=>{const t=h.value==="all"?1/0:parseInt(h.value),e=new Date;return e.setDate(e.getDate()-t),P.measurements.filter(s=>new Date(s.date)>=e).sort((s,n)=>new Date(n.date).getTime()-new Date(s.date).getTime())},y={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{percentage:{type:"linear",position:"left",min:0,max:100,title:{display:!0,text:"Процент"},grid:{display:!0}},mass:{type:"linear",position:"right",min:0,title:{display:!0,text:"Масса (кг)"},grid:{display:!1}}}},w=d(()=>{const t=c(),e=t.map(n=>x(n.date)).reverse(),s=t.map(n=>n.weight||null).reverse();return{labels:e,datasets:[{label:"Вес (кг)",data:s,borderColor:"#4CAF50",tension:.1,yAxisID:"mass"}]}}),N=d(()=>{const t=c(),e=t.map(o=>x(o.date)).reverse(),s=t.map(o=>o.bodyFatPercentage||null).reverse(),n=t.map(o=>o.musclePercentage||null).reverse(),D=t.map(o=>o.waterPercentage||null).reverse();return{labels:e,datasets:[{label:"Жир (%)",data:s,borderColor:"#FF5252",tension:.1,yAxisID:"percentage"},{label:"Мышцы (%)",data:n,borderColor:"#2196F3",tension:.1,yAxisID:"percentage"},{label:"Вода (%)",data:D,borderColor:"#00BCD4",tension:.1,yAxisID:"percentage"}]}}),k=d(()=>{const t=c(),e=t.map(o=>x(o.date)).reverse(),s=t.map(o=>{var i;return((i=o.measurements)==null?void 0:i.chest)||null}).reverse(),n=t.map(o=>{var i;return((i=o.measurements)==null?void 0:i.waist)||null}).reverse(),D=t.map(o=>{var i;return((i=o.measurements)==null?void 0:i.hips)||null}).reverse();return{labels:e,datasets:[{label:"Грудь (см)",data:s,borderColor:"#9C27B0",tension:.1,yAxisID:"mass"},{label:"Талия (см)",data:n,borderColor:"#FF9800",tension:.1,yAxisID:"mass"},{label:"Бёдра (см)",data:D,borderColor:"#795548",tension:.1,yAxisID:"mass"}]}});return(t,e)=>(l(),u("div",j,[a("div",G,[a("div",H,[e[13]||(e[13]=a("h2",null,"Аналитика",-1)),a("div",J,[e[2]||(e[2]=a("label",{for:"timeRange"},"Период:",-1)),I(a("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>h.value=s),id:"timeRange",class:"form-control"},e[1]||(e[1]=[V('<option value="7" data-v-97bea28f>Последние 7 дней</option><option value="30" data-v-97bea28f>Последние 30 дней</option><option value="90" data-v-97bea28f>Последние 3 месяца</option><option value="180" data-v-97bea28f>Последние 6 месяцев</option><option value="365" data-v-97bea28f>Последний год</option><option value="all" data-v-97bea28f>Все время</option>',6)]),512),[[B,h.value]])]),a("div",K,[a("div",Q,[e[4]||(e[4]=a("h3",null,"Вес",-1)),w.value.datasets[0].data.length>0?(l(),_(F(C),{key:0,data:w.value,options:y},null,8,["data"])):(l(),u("div",X,e[3]||(e[3]=[a("p",null,"Нет данных",-1)])))]),a("div",Y,[e[6]||(e[6]=a("h3",null,"Состав тела",-1)),N.value.datasets[0].data.length>0?(l(),_(F(C),{key:0,data:N.value,options:y},null,8,["data"])):(l(),u("div",Z,e[5]||(e[5]=[a("p",null,"Нет данных",-1)])))]),a("div",$,[e[8]||(e[8]=a("h3",null,"Обхваты",-1)),k.value.datasets[0].data.length>0?(l(),_(F(C),{key:0,data:k.value,options:y},null,8,["data"])):(l(),u("div",ee,e[7]||(e[7]=[a("p",null,"Нет данных",-1)])))])]),a("div",te,[m.value?(l(),u("div",ae,[e[9]||(e[9]=a("h4",null,"Вес",-1)),a("p",se,"Текущий: "+r(m.value.current)+"кг",1),a("p",{class:f(["change",{positive:Number(m.value.change)>0,negative:Number(m.value.change)<0}])}," Изменение: "+r(Number(m.value.change)>0?"+":"")+r(m.value.change)+"кг ",3)])):b("",!0),g.value?(l(),u("div",ne,[e[10]||(e[10]=a("h4",null,"Жир",-1)),a("p",oe,"Текущий: "+r(g.value.current)+"%",1),a("p",{class:f(["change",{positive:Number(g.value.change)<0,negative:Number(g.value.change)>0}])}," Изменение: "+r(Number(g.value.change)>0?"+":"")+r(g.value.change)+"% ",3)])):b("",!0),v.value?(l(),u("div",re,[e[11]||(e[11]=a("h4",null,"Мышцы",-1)),a("p",le,"Текущая: "+r(v.value.current)+"%",1),a("p",{class:f(["change",{positive:Number(v.value.change)>0,negative:Number(v.value.change)<0}])}," Изменение: "+r(Number(v.value.change)>0?"+":"")+r(v.value.change)+"% ",3)])):b("",!0),p.value?(l(),u("div",ie,[e[12]||(e[12]=a("h4",null,"TDEE",-1)),a("p",ue,"Текущий: "+r(p.value.current)+" ккал",1),a("p",{class:f(["change",{positive:Number(p.value.change)>0,negative:Number(p.value.change)<0}])}," Изменение: "+r(Number(p.value.change)>0?"+":"")+r(p.value.change)+" ккал ",3)])):b("",!0)])])])]))}}),be=W(ce,[["__scopeId","data-v-97bea28f"]]);export{be as default};

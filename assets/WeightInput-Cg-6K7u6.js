const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-DUmu94hc.js","assets/index-DFwemgHI.js","assets/index-BBhkAfXd.css","assets/fitness-CzgeNw8M.js","assets/MeasurementHistoryTable-TSZugJih.js","assets/formatters-DeZ-I65L.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/MeasurementHistoryTable-DE6mKXgE.css"])))=>i.map(i=>d[i]);
import{_ as K,d as G,r as z,b as J,e as Q,c as X,f as g,g as Y,a as Z,w as N,h as S,v as $,i as ee,j as te,o as se}from"./index-DFwemgHI.js";import{u as ne}from"./fitness-CzgeNw8M.js";import{M as re}from"./MeasurementHistoryTable-TSZugJih.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */var E;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(E||(E={}));class A extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const oe=s=>{var e,t;return s!=null&&s.androidBridge?"android":!((t=(e=s==null?void 0:s.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},ae=s=>{const e=s.CapacitorCustomPlatform||null,t=s.Capacitor||{},n=t.Plugins=t.Plugins||{},i=()=>e!==null?e.name:oe(s),r=()=>i()!=="web",l=d=>{const u=o.get(d);return!!(u!=null&&u.platforms.has(i())||c(d))},c=d=>{var u;return(u=t.PluginHeaders)===null||u===void 0?void 0:u.find(C=>C.name===d)},a=d=>s.console.error(d),o=new Map,m=(d,u={})=>{const C=o.get(d);if(C)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),C.proxy;const P=i(),L=c(d);let p;const V=async()=>(!p&&P in u?p=typeof u[P]=="function"?p=await u[P]():p=u[P]:e!==null&&!p&&"web"in u&&(p=typeof u.web=="function"?p=await u.web():p=u.web),p),B=(f,h)=>{var b,v;if(L){const y=L==null?void 0:L.methods.find(w=>h===w.name);if(y)return y.rtype==="promise"?w=>t.nativePromise(d,h.toString(),w):(w,x)=>t.nativeCallback(d,h.toString(),w,x);if(f)return(b=f[h])===null||b===void 0?void 0:b.bind(f)}else{if(f)return(v=f[h])===null||v===void 0?void 0:v.bind(f);throw new A(`"${d}" plugin is not implemented on ${P}`,E.Unimplemented)}},T=f=>{let h;const b=(...v)=>{const y=V().then(w=>{const x=B(w,f);if(x){const O=x(...v);return h=O==null?void 0:O.remove,O}else throw new A(`"${d}.${f}()" is not implemented on ${P}`,E.Unimplemented)});return f==="addListener"&&(y.remove=async()=>h()),y};return b.toString=()=>`${f.toString()}() { [capacitor code] }`,Object.defineProperty(b,"name",{value:f,writable:!1,configurable:!1}),b},D=T("addListener"),R=T("removeListener"),W=(f,h)=>{const b=D({eventName:f},h),v=async()=>{const w=await b;R({eventName:f,callbackId:w},h)},y=new Promise(w=>b.then(()=>w({remove:v})));return y.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await v()},y},_=new Proxy({},{get(f,h){switch(h){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?W:D;case"removeListener":return R;default:return T(h)}}});return n[d]=_,o.set(d,{name:d,proxy:_,platforms:new Set([...Object.keys(u),...L?[P]:[]])}),_};return t.convertFileSrc||(t.convertFileSrc=d=>d),t.getPlatform=i,t.handleError=a,t.isNativePlatform=r,t.isPluginAvailable=l,t.registerPlugin=m,t.Exception=A,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},le=s=>s.Capacitor=ae(s),k=le(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),M=k.registerPlugin;class H{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);const l=async()=>this.removeListener(e,t);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const i=this.listeners[e];if(!i){if(n){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}return}i.forEach(r=>r(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:n=>{this.notifyListeners(t,n)}}}unimplemented(e="not implemented"){return new k.Exception(e,E.Unimplemented)}unavailable(e="not available"){return new k.Exception(e,E.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const i=n.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(n=>{this.notifyListeners(e,n)}))}}const I=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),q=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class de extends H{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[i,r]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=q(i).trim(),r=q(r).trim(),t[i]=r}),t}async setCookie(e){try{const t=I(e.key),n=I(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${i}; path=${r}; ${l};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}M("CapacitorCookies",{web:()=>new de});const ce=async s=>new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{const i=n.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},n.onerror=i=>t(i),n.readAsDataURL(s)}),ue=(s={})=>{const e=Object.keys(s);return Object.keys(s).map(i=>i.toLocaleLowerCase()).reduce((i,r,l)=>(i[r]=s[e[l]],i),{})},fe=(s,e=!0)=>s?Object.entries(s).reduce((n,i)=>{const[r,l]=i;let c,a;return Array.isArray(l)?(a="",l.forEach(o=>{c=e?encodeURIComponent(o):o,a+=`${r}=${c}&`}),a.slice(0,-1)):(c=e?encodeURIComponent(l):l,a=`${r}=${c}`),`${n}&${a}`},"").substr(1):null,ge=(s,e={})=>{const t=Object.assign({method:s.method||"GET",headers:s.headers},e),i=ue(s.headers)["content-type"]||"";if(typeof s.data=="string")t.body=s.data;else if(i.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[l,c]of Object.entries(s.data||{}))r.set(l,c);t.body=r.toString()}else if(i.includes("multipart/form-data")||s.data instanceof FormData){const r=new FormData;if(s.data instanceof FormData)s.data.forEach((c,a)=>{r.append(a,c)});else for(const c of Object.keys(s.data))r.append(c,s.data[c]);t.body=r;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(i.includes("application/json")||typeof s.data=="object")&&(t.body=JSON.stringify(s.data));return t};class he extends H{async request(e){const t=ge(e,e.webFetchExtra),n=fe(e.params,e.shouldEncodeUrlParams),i=n?`${e.url}?${n}`:e.url,r=await fetch(i,t),l=r.headers.get("content-type")||"";let{responseType:c="text"}=r.ok?e:{};l.includes("application/json")&&(c="json");let a,o;switch(c){case"arraybuffer":case"blob":o=await r.blob(),a=await ce(o);break;case"json":a=await r.json();break;case"document":case"text":default:a=await r.text()}const m={};return r.headers.forEach((d,u)=>{m[u]=d}),{data:a,headers:m,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}M("CapacitorHttp",{web:()=>new he});var F;(function(s){s[s.Sunday=1]="Sunday",s[s.Monday=2]="Monday",s[s.Tuesday=3]="Tuesday",s[s.Wednesday=4]="Wednesday",s[s.Thursday=5]="Thursday",s[s.Friday=6]="Friday",s[s.Saturday=7]="Saturday"})(F||(F={}));const U=M("LocalNotifications",{web:()=>K(()=>import("./web-DUmu94hc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(s=>new s.LocalNotificationsWeb)});class j{static async requestPermissions(){return(await U.requestPermissions()).display==="granted"}static async scheduleWeightReminder(){await U.schedule({notifications:[{title:"Время взвешивания",body:"Не забудьте записать свой вес сегодня!",id:1,schedule:{at:this.getTomorrowMorning()},sound:"beep.wav",actionTypeId:"",extra:null}]})}static getTomorrowMorning(){const e=new Date;return e.setDate(e.getDate()+1),e.setHours(8,0,0,0),e}static async cancelAllNotifications(){await U.cancel({notifications:[]})}}const me={class:"weight-input"},we={class:"card"},be={class:"form-group"},pe={class:"form-group"},ve={class:"form-group"},ye={class:"form-group"},Pe={class:"checkbox-label"},Le=G({__name:"WeightInput",setup(s){const e=ne(),t=z(!1),n=J({date:new Date().toISOString().split("T")[0],weight:void 0,notes:""});Q(async()=>{if(e.editingMeasurement){const a=e.editingMeasurement;n.date=a.date.split("T")[0],n.weight=a.weight,n.notes=a.notes||"",e.setEditingMeasurement(null)}await j.requestPermissions()});const i=async()=>{t.value?await j.scheduleWeightReminder():await j.cancelAllNotifications()},r=()=>{if(n.weight){const a={date:n.date,weight:n.weight,notes:n.notes};e.addMeasurement(a),l()}},l=()=>{n.weight=0,n.notes="",n.date=new Date().toISOString().split("T")[0]},c=a=>{n.weight=a.weight||0};return(a,o)=>(se(),X("div",me,[g("div",we,[o[9]||(o[9]=Z('<h2 data-v-748aeb24>Запись веса</h2><div class="guidelines-card" data-v-748aeb24><h3 data-v-748aeb24>📝 Рекомендации для точного измерения</h3><ul data-v-748aeb24><li data-v-748aeb24>Взвешивайтесь в одно и то же время (идеально - утром)</li><li data-v-748aeb24>После посещения туалета</li><li data-v-748aeb24>До приема пищи и напитков (включая кофе)</li><li data-v-748aeb24>В одинаковой одежде или без одежды</li><li data-v-748aeb24>Накануне избегайте:</li><ul data-v-748aeb24><li data-v-748aeb24>Алкоголя</li><li data-v-748aeb24>Соленой пищи</li><li data-v-748aeb24>Большого количества жидкости</li></ul></ul></div>',2)),g("form",{onSubmit:N(r,["prevent"]),class:"measurement-form"},[g("div",be,[o[4]||(o[4]=g("label",{for:"date"},"Дата",-1)),S(g("input",{type:"date",id:"date","onUpdate:modelValue":o[0]||(o[0]=m=>n.date=m),class:"form-control",required:""},null,512),[[$,n.date]])]),g("div",pe,[o[5]||(o[5]=g("label",{for:"weight"},"Вес (кг)",-1)),S(g("input",{type:"number",id:"weight","onUpdate:modelValue":o[1]||(o[1]=m=>n.weight=m),class:"form-control",step:"0.1",required:""},null,512),[[$,n.weight]])]),g("div",ve,[o[6]||(o[6]=g("label",{for:"notes"},"Примечания",-1)),S(g("textarea",{id:"notes","onUpdate:modelValue":o[2]||(o[2]=m=>n.notes=m),class:"form-control",placeholder:"Например: после тренировки, натощак, etc."},null,512),[[$,n.notes]])]),g("div",ye,[g("label",Pe,[S(g("input",{type:"checkbox","onUpdate:modelValue":o[3]||(o[3]=m=>t.value=m),onChange:i},null,544),[[te,t.value]]),o[7]||(o[7]=ee(" Включить ежедневные напоминания "))])]),o[8]||(o[8]=g("button",{type:"submit",class:"btn btn-primary"},"Сохранить",-1))],32)]),Y(re,{type:"weight",onEdit:c})]))}}),Ee=ie(Le,[["__scopeId","data-v-748aeb24"]]),Te=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"}));export{H as W,Te as a};
